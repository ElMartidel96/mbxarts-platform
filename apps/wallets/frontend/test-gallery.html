<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Gallery Test</title>
</head>
<body>
  <script>
    // Test SVG encoding function
    function encodeSVG(svgString) {
      try {
        const cleaned = svgString.replace(/[\r\n]+/g, ' ').trim();
        return 'data:image/svg+xml;base64,' + btoa(unescape(encodeURIComponent(cleaned)));
      } catch (e) {
        console.log('Fallback to URL encoding:', e.message);
        return 'data:image/svg+xml,' + encodeURIComponent(svgString);
      }
    }

    // Test SVG generation
    function testSVG() {
      const testSVG = `<svg width="100" height="100" xmlns="http://www.w3.org/2000/svg">
        <rect width="100" height="100" fill="blue"/>
        <circle cx="50" cy="50" r="20" fill="white"/>
      </svg>`;
      
      const encoded = encodeSVG(testSVG);
      console.log('SVG encoding test successful:', encoded.substring(0, 50) + '...');
      
      // Test with complex SVG
      const complexSVG = `<svg width="400" height="400" xmlns="http://www.w3.org/2000/svg"><defs><linearGradient id="grad-test" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" style="stop-color:#8B5CF6;stop-opacity:1" /><stop offset="100%" style="stop-color:#3B82F6;stop-opacity:1" /></linearGradient></defs><rect width="400" height="400" fill="url(#grad-test)" /><circle cx="200" cy="200" r="50" fill="white" opacity="0.8"/></svg>`;
      
      const encodedComplex = encodeSVG(complexSVG);
      console.log('Complex SVG encoding test successful:', encodedComplex.substring(0, 50) + '...');
      
      return true;
    }

    try {
      testSVG();
      console.log('✅ All SVG encoding tests passed successfully!');
      document.body.innerHTML = '<h1 style="color: green; text-align: center; margin-top: 50px;">✅ Gallery SVG Encoding Test Passed!</h1><p style="text-align: center;">The ModernMuseumGallery component should now work without DOMException errors.</p>';
    } catch (error) {
      console.error('❌ SVG encoding test failed:', error);
      document.body.innerHTML = '<h1 style="color: red; text-align: center; margin-top: 50px;">❌ Gallery SVG Encoding Test Failed!</h1><p style="text-align: center;">Error: ' + error.message + '</p>';
    }
  </script>
</body>
</html>