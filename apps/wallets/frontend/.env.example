# CryptoGift Wallets - Environment Variables (ENHANCED SYSTEM 2025)
# Copy this file to .env.local and fill in your values

# ==================== CORE CONFIGURATION ====================

# Feature Flags (EXPERIMENTAL FEATURES)
NEXT_PUBLIC_FEATURE_NEON_GALLERY=1

# Site URLs and Branding (PRODUCTION ENVIRONMENT REQUIRED)
NEXT_PUBLIC_SITE_URL=https://cryptogift-wallets.vercel.app
NEXT_PUBLIC_PRODUCTION_URL=https://cryptogift-wallets.vercel.app
NEXT_PUBLIC_DOCS_URL=https://docs.cryptogift-wallets.vercel.app
NEXT_PUBLIC_BLOG_URL=https://blog.cryptogift-wallets.vercel.app
NEXT_PUBLIC_SUPPORT_URL=https://help.cryptogift-wallets.vercel.app
NEXT_PUBLIC_SUPPORT_EMAIL=support@mbxarts.com

# ThirdWeb Configuration
NEXT_PUBLIC_TW_CLIENT_ID=your_thirdweb_client_id_here
TW_SECRET_KEY=your_thirdweb_secret_key_here

# WalletConnect Configuration (REQUIRED for mobile wallets)
# Get your Project ID from https://cloud.walletconnect.com/
NEXT_PUBLIC_WC_PROJECT_ID=your_walletconnect_project_id_here

# Blockchain Configuration  
NEXT_PUBLIC_RPC_URL=https://base-sepolia.g.alchemy.com/v2/YOUR_ALCHEMY_API_KEY
NEXT_PUBLIC_CHAIN_ID=84532
NEXT_PUBLIC_CRYPTOGIFT_NFT_ADDRESS=0xeFCba1D72B8f053d93BA44b7b15a1BeED515C89b
NEXT_PUBLIC_PLAYER_NFT_ADDRESS=0xeFCba1D72B8f053d93BA44b7b15a1BeED515C89b

# ERC-6551 Token Bound Account Configuration
NEXT_PUBLIC_ERC6551_REGISTRY_ADDRESS=0x000000006551c19487814612e58FE06813775758
NEXT_PUBLIC_ERC6551_IMPLEMENTATION_ADDRESS=0x2d25602551487c3f3354dd80d76d54383a243358

# GiftEscrow Contract Configuration
NEXT_PUBLIC_ESCROW_CONTRACT_ADDRESS=0x46175CfC233500DA803841DEef7f2816e7A129E0
ESCROW_CONTRACT_ADDRESS=0x46175CfC233500DA803841DEef7f2816e7A129E0

# SimpleApprovalGate - EIP-712 Education System (Deployed & Verified)
NEXT_PUBLIC_SIMPLE_APPROVAL_GATE_ADDRESS=0x99cCBE808cf4c01382779755DEf1562905ceb0d2
# Education system approver configuration (NEVER store private keys in .env files)
NEXT_PUBLIC_SIMPLE_APPROVAL_GATE_APPROVER=your_approver_address_here
APPROVER_ADDRESS=your_approver_address_here
# APPROVER_PRIVATE_KEY should be stored in Secret Manager, not in .env files

# ==================== MEV PROTECTION CONFIGURATION ====================
# MEV Protection via Flashbots Protect (chain-aware)
# Modes: off | auto | fast (default: off)
NEXT_PUBLIC_MEV_PROTECT_MODE=off
# Supported chain IDs (Ethereum mainnet: 1, Sepolia: 11155111)
# Base (8453) and Base Sepolia (84532) NOT supported yet
NEXT_PUBLIC_MEV_PROTECT_SUPPORTED_CHAINS=[1,11155111]
# Flashbots Protect RPC endpoints
NEXT_PUBLIC_MEV_PROTECT_RPC_MAINNET=https://rpc.flashbots.net
NEXT_PUBLIC_MEV_PROTECT_RPC_SEPOLIA=https://rpc-sepolia.flashbots.net
# Enable MEV metrics dashboard (admin only)
NEXT_PUBLIC_MEV_PROTECT_METRICS_ENABLED=false

# ==================== APPROVALS/ALLOWANCES MANAGEMENT ====================
# Feature flag for token approvals management system
NEXT_PUBLIC_FEATURE_APPROVALS=off
# Maximum block range for getLogs pagination (2000-10000 recommended)
NEXT_PUBLIC_APPROVALS_MAX_BLOCK_RANGE=5000
# Block confirmations before considering events final
NEXT_PUBLIC_APPROVALS_CONFIRMATIONS=12
# Cache TTL for approval data (seconds)
NEXT_PUBLIC_APPROVALS_CACHE_TTL=300
# Enable real-time approval monitoring via WebSocket
NEXT_PUBLIC_APPROVALS_REALTIME=false
# Known spender addresses for risk assessment
NEXT_PUBLIC_PERMIT2_ADDRESS=0x000000000022D473030F116dDEE9F6B43aC78BA3
NEXT_PUBLIC_0X_ALLOWANCE_HOLDER=0xdef1c0ded9bec7f1a1670819833240f027b25eff

# ==================== TRANSACTION SIMULATION ====================
# Feature flag for transaction simulation preview
NEXT_PUBLIC_FEATURE_SIM_PREVIEW=off
# Simulation backend: local | tenderly | defender
NEXT_PUBLIC_SIM_BACKEND=local
# Simulation timeout in milliseconds
NEXT_PUBLIC_SIM_TIMEOUT=5000
# Tenderly configuration (optional, only if SIM_BACKEND=tenderly)
TENDERLY_API_KEY=
TENDERLY_PROJECT=
TENDERLY_USERNAME=
# Show gas estimates in simulation
NEXT_PUBLIC_SIM_SHOW_GAS=true
# Show balance changes in simulation
NEXT_PUBLIC_SIM_SHOW_BALANCES=true
# Show approval detections in simulation
NEXT_PUBLIC_SIM_SHOW_APPROVALS=true

# ==================== WALLET NETWORK & ASSET MANAGEMENT ====================
# Feature flag for one-click network/asset addition
NEXT_PUBLIC_FEATURE_WALLET_MANAGEMENT=off
# Enable unified wallet dashboard with glass morphism overlay (replaces old wallet interface)
NEXT_PUBLIC_FEATURE_WALLET_DASHBOARD=on
# Enable auto-switch to required network
NEXT_PUBLIC_AUTO_SWITCH_NETWORK=true
# Show network mismatch warnings
NEXT_PUBLIC_SHOW_NETWORK_WARNINGS=true
# Mobile wallet deep link support
NEXT_PUBLIC_ENABLE_MOBILE_DEEPLINKS=true
NEXT_PUBLIC_MEV_METRICS_ENABLED=false

# ==================== TRANSACTION HISTORY ====================
# Enable consolidated transaction history
NEXT_PUBLIC_FEATURE_TX_HISTORY=off
# Maximum blocks to scan per request
NEXT_PUBLIC_TX_HISTORY_MAX_BLOCKS=10000
# Transactions per page
NEXT_PUBLIC_TX_HISTORY_PAGE_SIZE=20
# Cache TTL in seconds
NEXT_PUBLIC_TX_HISTORY_CACHE=on
NEXT_PUBLIC_TX_HISTORY_CACHE_TTL=300
# Include transaction types
NEXT_PUBLIC_TX_HISTORY_INTERNAL=off
NEXT_PUBLIC_TX_HISTORY_TOKENS=on
NEXT_PUBLIC_TX_HISTORY_NFTS=on

# ==================== PWA CONFIGURATION ====================
# Enable Progressive Web App features
NEXT_PUBLIC_FEATURE_PWA=off
# Auto-update service worker
NEXT_PUBLIC_PWA_AUTO_UPDATE=on
# Show install prompt
NEXT_PUBLIC_PWA_INSTALL_PROMPT=on
# Enable offline mode
NEXT_PUBLIC_PWA_OFFLINE=on
# Update check interval (milliseconds)
NEXT_PUBLIC_PWA_UPDATE_INTERVAL=3600000

# ==================== ACCESSIBILITY (WCAG 2.2 AA) ====================
# Enable accessibility features
NEXT_PUBLIC_FEATURE_A11Y=on
# Reduced motion support
NEXT_PUBLIC_A11Y_REDUCED_MOTION=on
# High contrast mode
NEXT_PUBLIC_A11Y_HIGH_CONTRAST=off
# Focus indicators
NEXT_PUBLIC_A11Y_FOCUS=on
# Skip links
NEXT_PUBLIC_A11Y_SKIP_LINKS=on
# Screen reader announcements
NEXT_PUBLIC_A11Y_ANNOUNCEMENTS=on
# Keyboard navigation
NEXT_PUBLIC_A11Y_KEYBOARD=on
# Minimum target size (pixels) - WCAG 2.2 AA requires 44px
NEXT_PUBLIC_A11Y_TARGET_SIZE=44

# DEPRECATED: Use NEXT_PUBLIC_CRYPTOGIFT_NFT_ADDRESS instead
# NEXT_PUBLIC_NFT_DROP_ADDRESS=0xeFCba1D72B8f053d93BA44b7b15a1BeED515C89b

# Deployment
PRIVATE_KEY_DEPLOY=your_wallet_private_key
NEXT_PUBLIC_APP_URL=https://your-domain.vercel.app
NEXT_PUBLIC_BASE_URL=https://your-domain.vercel.app

# ==================== PERSISTENT DATABASE (REQUIRED) ====================

# Vercel KV with Upstash Backend (Current Standard Setup)
# These are automatically set when you connect Upstash via Vercel Marketplace
# Get these from Vercel Dashboard > Settings > Environment Variables after setup
KV_REST_API_URL=https://your-db-name.upstash.io
KV_REST_API_TOKEN=your_kv_token
KV_REST_API_READ_ONLY_TOKEN=your_readonly_token
KV_URL=rediss://default:token@your-db.upstash.io:6379
REDIS_URL=rediss://default:token@your-db.upstash.io:6379

# Alternative Direct Upstash Setup (if not using Vercel KV integration)
# UPSTASH_REDIS_REST_URL=https://your-redis-db.upstash.io
# UPSTASH_REDIS_REST_TOKEN=your_upstash_token

# ==================== GASLESS TRANSACTIONS ====================

# Biconomy Gasless Configuration (SERVER-SIDE ONLY - NEVER EXPOSE TO CLIENT)
BICONOMY_MEE_API_KEY=your_biconomy_mee_api_key
BICONOMY_PROJECT_ID=your_biconomy_project_id
BICONOMY_PAYMASTER_API_KEY=your_biconomy_paymaster_api_key
BICONOMY_PAYMASTER_URL=https://paymaster.biconomy.io/api/v1/84532/your_paymaster_key
BICONOMY_BUNDLER_URL=https://bundler.biconomy.io/api/v2/84532/your_bundler_key

# ==================== IPFS STORAGE (OPTIONAL) ====================

# NFT.Storage (Recommended for development - free, permanent)
# Get your free API key from https://nft.storage/
NFT_STORAGE_API_KEY=your_nft_storage_api_key

# Pinata (For production - professional grade)
PINATA_API_KEY=your_pinata_api_key
PINATA_SECRET_API_KEY=your_pinata_secret_key

# ==================== AI FEATURES (OPTIONAL) ====================

# PhotoRoom AI (Image filtering)
PHOTOROOM_API_KEY=your_photoroom_api_key

# ==================== CALENDAR INTEGRATION ====================

# Calendly Integration (for Sales Masterclass completion)
# Get your Calendly URL from https://calendly.com/
# Example: https://calendly.com/your-username/consultation
NEXT_PUBLIC_CALENDLY_URL=https://calendly.com/cryptogift-demo/consultation

# ==================== EMAIL VERIFICATION SYSTEM ====================

# Resend API for email verification (2025 recommended provider)
# Get your API key from https://resend.com/api-keys
# Free tier: 100 emails/day, 3,000 emails/month
RESEND_API_KEY=re_your_resend_api_key_here

# ==================== NOTES ====================
# 
# CRITICAL REQUIREMENTS:
# - Upstash Redis variables are REQUIRED for referral persistence
# - Without Redis, all referral data will be lost on server restart
# - Get Upstash credentials from Vercel Dashboard > Storage > Marketplace > Upstash
# 
# IPFS Strategy:
# - System tries NFT.Storage → Pinata → ThirdWeb → Emergency fallback
# - Works without API keys but better with them
# 
# Real-time Features:
# - Server-Sent Events for live referral updates
# - Auto-fallback to polling if SSE fails
# - Enhanced tracking with wallet address persistence

# ==================== TESTING & DEBUGGING ====================

# Security Tokens (REQUIRED for production)
ADMIN_API_TOKEN=your_secure_admin_token_here
API_ACCESS_TOKEN=your_secure_api_access_token_here
NEXT_PUBLIC_API_ACCESS_TOKEN=your_secure_api_access_token_here

# JWT Configuration (REQUIRED for authentication)
JWT_SECRET=your_strong_jwt_secret_minimum_32_characters_long

# Cron Jobs & Automation (REQUIRED for production)
CRON_SECRET=your_secure_cron_secret_for_automation_endpoints

# Emergency Admin Access (OPTIONAL - for recovery scenarios)
EMERGENCY_ADMIN_KEY=your_emergency_admin_key_for_recovery_only

# ==================== SECURITY FEATURE FLAGS ====================

# Education System Bypass (CRITICAL SECURITY SETTING)
# DEFAULT: false - Education bypass requires explicit enablement and authentication
# WARNING: Only enable for authorized admin operations with proper auditing
ENABLE_EDUCATION_BYPASS=false

# Legacy Data Reading (EMERGENCY ONLY)
# DEFAULT: false - Legacy number format mappings are rejected by default
# WARNING: Only enable during emergency recovery scenarios
ENABLE_LEGACY_READ=false

# Memory Cache Layer (SERVERLESS OPTIMIZATION)
# DEFAULT: false - Memory cache is disabled by default in serverless environments
# NOTE: Enable only after measuring actual performance benefits
ENABLE_MEMORY_CACHE=false

# Debug Endpoints Configuration
# Set to 'true' to enable debug endpoints in production (requires ADMIN_API_TOKEN)
ENABLE_DEBUG_ENDPOINTS=true

# Disable metadata cache for testing (forces fresh data)
# Set to 'true' to bypass cached metadata and force real-time lookups
# DISABLE_METADATA_CACHE=false

# Enable transaction log recovery (PERFORMANCE WARNING)
# Set to 'true' to enable expensive blockchain transaction log analysis
# WARNING: This can cause 80+ warnings and Alchemy rate limit exhaustion
# ENABLE_TX_LOG_RECOVERY=false

# ==================== SECURITY CONFIGURATION ====================

# Upload Security Limits (protect against abuse)
# Maximum file size for uploads (bytes)
MAX_UPLOAD_SIZE=52428800  # 50MB in bytes

# Maximum file size before compression kicks in (bytes)  
COMPRESSION_THRESHOLD=2097152  # 2MB in bytes

# Image compression quality (0-100, lower = smaller files)
IMAGE_COMPRESSION_QUALITY=80

# Maximum image dimensions after compression (px)
MAX_IMAGE_WIDTH=2048
MAX_IMAGE_HEIGHT=2048

# Allowed MIME types for uploads (comma separated)
ALLOWED_MIME_TYPES=image/jpeg,image/jpg,image/png,image/gif,image/webp

# Allowed IPFS gateway domains (comma separated)
ALLOWED_IPFS_DOMAINS=gateway.thirdweb.com,ipfs.io,cloudflare-ipfs.com,gateway.pinata.cloud,nftstorage.link

# Request timeout for external IPFS fetches (milliseconds)
IPFS_FETCH_TIMEOUT=10000

# Redis connection timeout (milliseconds)
REDIS_TIMEOUT=5000

# Rate limiting configuration
RATE_LIMIT_MAX_REQUESTS=100  # requests per window
RATE_LIMIT_WINDOW_MS=900000  # 15 minutes in milliseconds

# ==================== WEB PUSH NOTIFICATIONS ====================
# Enable Web Push (PWA native notifications)
NEXT_PUBLIC_FEATURE_WEBPUSH=off
# VAPID keys for Web Push (generate with: npx web-push generate-vapid-keys)
NEXT_PUBLIC_WEBPUSH_PUBLIC_KEY=your_vapid_public_key_here
WEBPUSH_PRIVATE_KEY=your_vapid_private_key_here
# Sender email for Web Push
NEXT_PUBLIC_WEBPUSH_SENDER_EMAIL=support@cryptogift-wallets.com

# ==================== PUSH PROTOCOL ====================
# Enable Push Protocol decentralized notifications
NEXT_PUBLIC_FEATURE_PUSH_PROTOCOL=off
# Environment: staging | prod
PUSH_ENV=staging
# Channel alias (staging uses test channel, prod requires 50 PUSH stake)
PUSH_CHANNEL_ALIAS=cryptogift-staging
# Channel signer (KMS reference for production, never store key directly)
# Staging: Use mock signer
# Production: aws-kms:alias/cryptogift-push-prod
PUSH_CHANNEL_SIGNER_KMS=mock-staging-signer

# ==================== ACCOUNT ABSTRACTION (ERC-4337) ====================
# Enable Account Abstraction features
NEXT_PUBLIC_FEATURE_AA=off
# Enable ERC-20 Paymaster (pay gas with USDC)
NEXT_PUBLIC_FEATURE_ERC20_PAYMASTER=off
# Enable Session Keys (temporary permissions)
NEXT_PUBLIC_FEATURE_SESSION_KEYS=off
# Enable Social Recovery (guardians + passkeys)
NEXT_PUBLIC_FEATURE_RECOVERY=off

# Pimlico Configuration (for bundler and paymaster)
# Get API key from https://dashboard.pimlico.io
NEXT_PUBLIC_PIMLICO_API_KEY=your_pimlico_api_key_here

# Supported chains for AA: Base (8453) and Base Sepolia (84532)
# Entry points are standard across all chains:
# - v0.6: 0x5FF137D4b0FDCD49DcA30c7CF57E578a026d2789
# - v0.7: 0x0000000071727De22E5E9d8BAf0edAc6f37da032

# Session Keys Configuration
# Maximum session duration in hours (default: 24)
SESSION_MAX_TTL_HOURS=24
# Maximum value per transaction in USD (default: 25)
SESSION_MAX_VALUE_USD=25
# Allowed function selectors (comma-separated)
# Options: transfer, approve, claim, swap, mint
SESSION_ALLOWED_SELECTORS=transfer,approve,claim

# ==================== BRIDGES & ON/OFF-RAMP ====================
# Enable Bridge Aggregation
NEXT_PUBLIC_FEATURE_BRIDGE=off
# Bridge provider: lifi | socket | manual
NEXT_PUBLIC_BRIDGE_PROVIDER=lifi
# Allowed tokens for bridging (comma-separated)
NEXT_PUBLIC_BRIDGE_ALLOWED_TOKENS=ETH,USDC
# Maximum slippage in basis points (100 = 1%)
NEXT_PUBLIC_BRIDGE_MAX_SLIPPAGE_BPS=100
# Shadow mode (track but don't execute)
NEXT_PUBLIC_BRIDGE_SHADOW_MODE=false
# Allowed bridge protocols (comma-separated)
# Options: hop, stargate, across, cbridge, connext, hyphen, optimism, polygon, arbitrum
NEXT_PUBLIC_BRIDGE_ALLOWED_PROTOCOLS=hop,stargate,across

# Enable On-Ramp (fiat to crypto)
NEXT_PUBLIC_FEATURE_ONRAMP=off
# On-ramp provider: transak | moonpay | coinbase
NEXT_PUBLIC_ONRAMP_PROVIDER=transak
# Transak configuration
NEXT_PUBLIC_TRANSAK_API_KEY=your_transak_api_key_here
NEXT_PUBLIC_TRANSAK_ENVIRONMENT=STAGING
# MoonPay configuration (alternative)
NEXT_PUBLIC_MOONPAY_API_KEY=your_moonpay_api_key_here
NEXT_PUBLIC_MOONPAY_ENVIRONMENT=sandbox
# Coinbase Pay configuration (alternative)
NEXT_PUBLIC_COINBASE_PAY_APP_ID=your_coinbase_pay_app_id_here

# Bridge & On-ramp limits
NEXT_PUBLIC_BRIDGE_MIN_AMOUNT_USD=10
NEXT_PUBLIC_BRIDGE_MAX_AMOUNT_USD=10000
NEXT_PUBLIC_ONRAMP_MIN_AMOUNT_USD=20
NEXT_PUBLIC_ONRAMP_MAX_AMOUNT_USD=5000

# ==================== MBXARTS SERVICE INTEGRATION ====================
# Cross-service communication between Wallets (gifts.mbxarts.com) and DAO (mbxarts.com)

# DAO Service URLs
NEXT_PUBLIC_DAO_API_URL=https://mbxarts.com
DAO_INTERNAL_URL=https://mbxarts.com

# Internal API Key for service-to-service authentication
# Generate with: openssl rand -hex 32
# MUST match the key configured in DAO service
DAO_INTERNAL_API_KEY=
INTERNAL_API_KEY=

# Wallets service specific key (optional, uses INTERNAL_API_KEY if not set)
WALLETS_INTERNAL_API_KEY=

# ==================== SUPABASE CONFIGURATION ====================
# Required for profiles, referrals, and data persistence

# Supabase URLs (from your Supabase project settings)
NEXT_PUBLIC_SUPABASE_URL=https://your-project.supabase.co
SUPABASE_URL=https://your-project.supabase.co

# Supabase API Keys
NEXT_PUBLIC_SUPABASE_ANON_KEY=your_supabase_anon_key
SUPABASE_ANON_KEY=your_supabase_anon_key
SUPABASE_SERVICE_ROLE_KEY=your_supabase_service_role_key
